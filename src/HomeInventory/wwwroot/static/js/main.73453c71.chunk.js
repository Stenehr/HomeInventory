(this["webpackJsonphome-inventory-client"]=this["webpackJsonphome-inventory-client"]||[]).push([[0],{357:function(e,t,n){},358:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return We}));var a=n(0),i=n(55),r=n.n(i),c=n(371),o=n(9),s=n(375),u=n(359),l=n(11),d=n.n(l),j=n(19),b=n(14),m=n(10),h=n(60),O=n.n(h);O.a.defaults.baseURL="/api",O.a.interceptors.request.use((function(e){var t=K.userStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),O.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.data;switch(e.status){case 400:var n=t.errors;if(n){var a=Object.keys(n).map((function(e){return n[e][0]}));alert(a.join(","))}else alert(t);break;case 404:We.push("/not-found");break;case 500:We.push("/server-error",t);break;default:return}}));var p=function(e){return null===e||void 0===e?void 0:e.data},f=function(e){return O.a.get(e).then(p)},x=function(e,t){return O.a.post(e,t).then(p)},v=function(e,t){return O.a.put(e,t).then(p)},g="/account",C={login:function(e){return x("".concat(g,"/login"),e)},register:function(e){return x("".concat(g,"/register"),e)},getUser:function(){return f(g)}},k="/inventory",I={getAll:function(e){return O.a.get(k,{params:e}).then(p)},get:function(e){return f("".concat(k,"/").concat(e))},create:function(e){return x(k,e)},edit:function(e,t){return v("".concat(k,"/").concat(e),t)}},w="".concat(k,"/item-location"),L={getAll:function(){return f(w)},create:function(e){return x(w,e)}},S="".concat(k,"/item-condition"),y="/admin/statistics",T={admin:{getUserTotalItem:function(){return f("".concat(y,"/user-total-items"))},getUserTotalLocations:function(){return f("".concat(y,"/user-total-added-locations"))},getUserItemsTotalWeight:function(){return f("".concat(y,"/user-total-items-weight"))},getUserTotalItemsWithImagesCount:function(){return f("".concat(y,"/user-total-items-with-images-count"))}},account:C,inventory:I,itemLocation:L,itemCondition:{getAll:function(){return f(S)},create:function(e){return x(S,e)}}},N=n(25),U=n(17),A="jwt",F=function(){function e(){var t=this;Object(b.a)(this,e),this.user=null,this.token=window.localStorage.getItem(A),this.userLoading=!1,this.login=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.account.login(n);case 3:a=e.sent,t.setUser(a),a.isAdmin?We.push("/admin"):We.push("/items"),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){t.user=null,t.token=null},this.register=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.account.register(n);case 3:a=e.sent,t.setUser(a),We.push("/items"),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.getUser=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.userLoading=!0,e.prev=1,e.next=4,T.account.getUser();case 4:n=e.sent,Object(m.h)((function(){t.user=Object(N.a)(Object(N.a)({},n),{},{token:t.token})}));case 6:return e.prev=6,t.userLoading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])}))),this.setUser=function(e){t.user=e,t.token=e.token},Object(m.d)(this),Object(m.g)((function(){return t.token}),(function(e){e?window.localStorage.setItem(A,e):(window.localStorage.removeItem(A),window.location.reload())}))}return Object(U.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}},{key:"isAdmin",get:function(){return this.isLoggedIn&&this.user.isAdmin}},{key:"isRegularUser",get:function(){return this.isLoggedIn&&!this.user.isAdmin}}]),e}(),K={adminStore:new function e(){var t=this;Object(b.a)(this,e),this.userTotalItems=[],this.userTotalLocations=[],this.userItemsTotalWeight=[],this.userTotalItemsWithImagesCount=[],this.loading=!1,this.loadUserTotalItems=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,T.admin.getUserTotalItem();case 4:n=e.sent,Object(m.h)((function(){return t.userTotalItems=n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t.loading=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),this.loadUserTotalLocations=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,T.admin.getUserTotalLocations();case 4:n=e.sent,Object(m.h)((function(){return t.userTotalLocations=n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t.loading=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),this.loadUserItemsTotalWeight=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,T.admin.getUserItemsTotalWeight();case 4:n=e.sent,Object(m.h)((function(){return t.userItemsTotalWeight=n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t.loading=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),this.loadUserTotalItemsWithImagesCount=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,T.admin.getUserTotalItemsWithImagesCount();case 4:n=e.sent,Object(m.h)((function(){return t.userTotalItemsWithImagesCount=n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t.loading=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),Object(m.d)(this)},appStore:new function e(){var t=this;Object(b.a)(this,e),this.appLoaded=!1,this.setAppLoaded=function(){t.appLoaded=!0},Object(m.d)(this)},userStore:new F,inventoryStore:new function e(){var t=this;Object(b.a)(this,e),this.items=[],this.selectedItem=null,this.itemLocations=[],this.itemConditions=[],this.itemLoading=!1,this.itemLocationsLoaded=!1,this.itemConditionsLoaded=!1,this.loadItems=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.itemLoading=!0,e.prev=1,e.next=4,T.inventory.getAll(t.createUrlParams(n));case 4:a=e.sent,Object(m.h)((function(){t.items=a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t.itemLoading=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),this.createUrlParams=function(e){var t=new URLSearchParams;return Object.keys(null!==e&&void 0!==e?e:{}).forEach((function(n){var a=e[n];a&&t.append(n,a)})),t},this.loadItemLocations=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.itemLocation.getAll();case 3:n=e.sent,Object(m.h)((function(){t.itemLocations=n,t.itemLocationsLoaded=!0})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.getItemLocation=function(e){return t.itemLocations.find((function(t){return t.id===e}))},this.createItemLocation=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.itemLocation.create(n);case 3:return a=e.sent,Object(m.h)((function(){t.itemLocationsLoaded=!1})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.loadItemConditions=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.itemCondition.getAll();case 3:n=e.sent,Object(m.h)((function(){t.itemConditions=n,t.itemConditionsLoaded=!0})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.createItemCondition=function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.itemCondition.create(n);case 3:return a=e.sent,Object(m.h)((function(){t.itemConditionsLoaded=!1})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.createItem=function(){var e=Object(j.a)(d.a.mark((function e(n){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.createFormData(n),e.next=4,T.inventory.create(a);case 4:return i=e.sent,Object(m.h)((function(){t.items.push(i),t.selectedItem=i})),e.abrupt("return",i);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),this.updateItem=function(){var e=Object(j.a)(d.a.mark((function e(n,a){var i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.createFormData(a),e.next=4,T.inventory.edit(n,i);case 4:r=e.sent,Object(m.h)((function(){var e=t.items.map((function(e){return e.id})).indexOf(n);t.items.splice(e,1,r),t.selectedItem=r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),this.createFormData=function(e){var t=new FormData;return Object.keys(e).forEach((function(n){var a=e[n];void 0===a||null===a?t.append(n,""):t.append(n,a)})),t},this.loadSelectedItem=function(){var e=Object(j.a)(d.a.mark((function e(n){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.itemLoading=!0,e.prev=1,null===(a=t.items.find((function(e){return e.id===Number(n)})))||void 0===a){e.next=6;break}e.t0=a,e.next=9;break;case 6:return e.next=8,T.inventory.get(n);case 8:e.t0=e.sent;case 9:i=e.t0,Object(m.h)((function(){return t.selectedItem=i})),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),console.log(e.t1);case 16:return e.prev=16,Object(m.h)((function(){return t.itemLoading=!1})),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),Object(m.d)(this)}},R=Object(a.createContext)(K);function V(){return Object(a.useContext)(R)}var E=n(44),H=n(1);function D(){var e=V().userStore,t=e.logout,n=e.isAdmin,a=e.isRegularUser,i=Object(o.g)();return Object(H.jsx)(s.a,{fixed:"top",children:Object(H.jsxs)(c.a,{children:[n&&Object(H.jsx)(s.a.Item,{as:E.a,to:"/admin",header:!0,children:"Admin"}),a&&Object(H.jsx)(s.a.Item,{as:E.a,to:"/items",header:!0,children:"Minu asjad"}),a&&Object(H.jsx)(s.a.Item,{children:Object(H.jsx)(u.a,{positive:!0,content:"Lisa ese",as:E.a,to:"/add-item"})}),Object(H.jsx)(s.a.Item,{position:"right",children:Object(H.jsx)(u.a,{onClick:function(){t(),i.push("/")},content:"Logi v\xe4lja",icon:"power"})})]})})}var P=n(13),W=n(382),B=n(383),q=n(372);function z(){return Object(H.jsx)(q.a,{active:!0,inline:"centered"})}var M=n(131),G=n(21),J=n(15),$=n(374);function Q(e,t){var n=e.getFieldMeta(t);return n.touched&&n.error}function X(e,t){return"data:".concat(t,";base64,").concat(e)}function Y(e,t){return{key:e.id,value:e.id,text:e[t]}}function Z(e){/^\d*\.?\d?$/g.test(e.key)||e.preventDefault(),"."===e.key&&e.target.value.includes(".")&&e.preventDefault()}var _=Object(P.a)((function(){var e=V().inventoryStore,t=e.loadItems,n=e.itemLoading,i=e.itemLocations,r=e.itemLocationsLoaded,c=e.loadItemLocations,o=e.itemConditions,s=e.loadItemConditions,l=e.itemConditionsLoaded;function d(){return{name:"",serialNumber:"",description:"",itemLocationId:null,itemConditionId:null,weightHeavierThen:null,weightLighterThen:null}}var j=Object(a.useState)(d),b=Object(J.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)([]),p=Object(J.a)(O,2),f=p[0],x=p[1],v=Object(a.useState)([]),g=Object(J.a)(v,2),C=g[0],k=g[1];function I(e,t){var n=t.name,a=t.value;h(Object(N.a)(Object(N.a)({},m),{},Object(M.a)({},n,a)))}return Object(a.useEffect)((function(){t(m)}),[m,t]),Object(a.useEffect)((function(){function e(){x([{key:0,value:void 0,text:"---vali---"}].concat(Object(G.a)(i.map((function(e){return Y(e,"name")})))))}r?e():c().then(e)}),[i,c,r]),Object(a.useEffect)((function(){function e(){k([{key:0,value:void 0,text:"---vali---"}].concat(Object(G.a)(o.map((function(e){return Y(e,"condition")})))))}l?e():s().then(e)}),[o,s,l]),Object(H.jsxs)($.a,{children:[Object(H.jsxs)($.a.Group,{widths:"equal",children:[Object(H.jsx)($.a.Input,{name:"name",label:"Nimi",value:m.name,onChange:I}),Object(H.jsx)($.a.Input,{name:"serialNumber",label:"Seerianumber",value:m.serialNumber,onChange:I}),Object(H.jsx)($.a.Input,{name:"description",label:"Kirjeldus",value:m.description,onChange:I}),Object(H.jsx)($.a.Input,{name:"weightHeavierThen",label:"Kaal raskem, kui (kg)",onKeyPress:Z,onChange:I,value:m.weightHeavierThen}),Object(H.jsx)($.a.Input,{name:"weightLighterThen",label:"Kaal kergem, kui (kg)",onKeyPress:Z,onChange:I,value:m.weightLighterThen})]}),Object(H.jsxs)($.a.Group,{children:[Object(H.jsx)($.a.Select,{width:"10",name:"itemLocationId",label:"Vali asukoht",placeholder:"Vali asukoht...",options:f,value:m.itemLocationId,onChange:I}),Object(H.jsx)($.a.Select,{width:"6",name:"itemConditionId",label:"Vali seisukord",placeholder:"Vali seisukord...",options:C,value:m.itemConditionId,onChange:I})]}),Object(H.jsx)(u.a,{type:"button",onClick:function(){return h({name:"",serialNumber:"",description:"",itemLocationId:null,itemConditionId:null,weightHeavierThen:null,weightLighterThen:null})},content:"T\xfchjenda",disabled:n})]})})),ee=n(379),te=n(215);function ne(e){var t,n=e.item;return Object(H.jsxs)(ee.a,{children:[n.imageDto&&Object(H.jsx)(te.a,{src:X(n.imageDto.base64Image,n.imageDto.mimeType),wrapped:!0,ui:!1}),Object(H.jsxs)(ee.a.Content,{children:[Object(H.jsx)(ee.a.Header,{children:n.name}),Object(H.jsx)(ee.a.Meta,{}),Object(H.jsxs)(ee.a.Description,{children:[Object(H.jsxs)("p",{children:["Asukoht: ",n.itemLocation.name]}),Object(H.jsxs)("p",{children:["Seerianumber: ",n.serialNumber]}),Object(H.jsxs)("p",{children:["Kaal: ",n.weight?"".concat(n.weight," kg"):""]}),Object(H.jsxs)("p",{children:["Seisukord: ",null===(t=n.itemCondition)||void 0===t?void 0:t.condition]})]})]}),Object(H.jsx)(ee.a.Content,{extra:!0,children:Object(H.jsx)(u.a,{floated:"right",content:"Detailid",as:E.a,to:"/details/".concat(n.id)})})]})}var ae=Object(P.a)((function(){var e=V().inventoryStore,t=e.items,n=e.loadItems,i=e.itemLoading;return Object(a.useEffect)((function(){n()}),[n]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(W.a,{children:Object(H.jsx)(_,{})}),Object(H.jsx)(B.a,{children:i?Object(H.jsx)(z,{}):null===t||void 0===t?void 0:t.map((function(e){return Object(H.jsx)(B.a.Column,{computer:"4",mobile:"16",children:Object(H.jsx)(ne,{item:e})},null===e||void 0===e?void 0:e.id)}))})]})})),ie=n(384),re=n(50),ce=n(380),oe=n(26),se=Object(P.a)((function(e){var t=e.handleBackClick,n=V().userStore,i=Object(a.useState)(null),r=Object(J.a)(i,2),c=r[0],o=r[1],s=Object(re.a)({initialValues:{userName:"",password:""},onSubmit:function(e){return n.login(e).catch((function(){o("Vale kasutajanimi v\xf5i parool")}))},validationSchema:oe.b({userName:oe.d().min(4,"Kasutajanimi peab olema v\xe4hemalt 4 t\xe4hem\xe4rki").required("Kasutajanimi on kohustuslik"),password:oe.d().min(4,"Parool peab olema v\xe4hemalt 4 t\xe4hem\xe4rki").required("Parool on kohustuslik")})});return Object(H.jsxs)($.a,{error:!!c,onSubmit:s.handleSubmit,loading:s.isSubmitting,autoComplete:"off",children:[Object(H.jsx)($.a.Input,{name:"userName",label:"Kasutajanimi",autoFocus:!0,onChange:s.handleChange,value:s.values.userName,error:Q(s,"userName")}),Object(H.jsx)($.a.Input,{type:"password",name:"password",label:"Parool",onChange:s.handleChange,value:s.values.password,error:Q(s,"password")}),Object(H.jsx)(ce.a,{error:!0,content:c}),Object(H.jsx)(u.a,{type:"submit",positive:!0,content:"Logi sisse"}),Object(H.jsx)(u.a,{content:"Tagasi",onClick:t})]})})),ue=Object(P.a)((function(e){var t=e.handleBackClick,n=V().userStore,i=Object(a.useState)(null),r=Object(J.a)(i,2),c=r[0],o=r[1],s=Object(re.a)({initialValues:{userName:"",password:"",passwordConfirm:""},onSubmit:function(e){return n.register(e).catch((function(e){var t=e.response.data;o(t)}))},validationSchema:oe.b({userName:oe.d().min(4,"Kasutajanimi peab olema v\xe4hemalt 4 t\xe4hem\xe4rki").required("Kasutajanimi on kohustuslik"),password:oe.d().min(4,"Parool peab olema v\xe4hemalt 4 t\xe4hem\xe4rki").required("Parool on kohustuslik"),passwordConfirm:oe.d().oneOf([oe.c("password")],"Paroolid ei \xfchti")})});return Object(H.jsxs)($.a,{error:!!c,onSubmit:s.handleSubmit,loading:s.isSubmitting,autoComplete:"off",children:[Object(H.jsx)($.a.Input,{name:"userName",label:"Kasutajanimi",autoFocus:!0,onChange:s.handleChange,value:s.values.userName,error:Q(s,"userName")}),Object(H.jsx)($.a.Input,{type:"password",name:"password",label:"Parool",onChange:s.handleChange,value:s.values.password,error:Q(s,"password")}),Object(H.jsx)($.a.Input,{type:"password",name:"passwordConfirm",label:"Korda parooli",onChange:s.handleChange,value:s.values.passwordConfirm,error:Q(s,"passwordConfirm")}),Object(H.jsx)(ce.a,{error:!0,content:c}),Object(H.jsx)(u.a,{type:"submit",positive:!0,content:"Registreeri"}),Object(H.jsx)(u.a,{content:"Tagasi",onClick:t})]})})),le="loginOpen",de="registerOpen",je=Object(P.a)((function(){var e=Object(a.useState)(null),t=Object(J.a)(e,2),n=t[0],i=t[1],r=Object(o.g)(),c=V().userStore,s=c.isAdmin;function l(){i(null)}return c.isRegularUser&&r.push("/items"),s&&r.push("/admin"),Object(H.jsxs)(B.a,{centered:!0,style:{marginTop:"5em"},children:[Object(H.jsx)(B.a.Row,{centered:!0,children:Object(H.jsx)(B.a.Column,{textAlign:"center",children:Object(H.jsx)(ie.a,{as:"h1",children:"Minu asjad"})})}),Object(H.jsx)(B.a.Row,{children:Object(H.jsx)(B.a.Column,{computer:"6",tablet:"10",mobile:"16",children:Object(H.jsxs)(W.a,{padded:!0,children:[!n&&Object(H.jsxs)(B.a,{centered:!0,children:[Object(H.jsx)(u.a,{content:"Logi sisse",onClick:function(){return i(le)}}),Object(H.jsx)(u.a,{content:"Registreeri",onClick:function(){return i(de)}})]}),n===le&&Object(H.jsx)(se,{handleBackClick:l}),n===de&&Object(H.jsx)(ue,{handleBackClick:l})]})})})]})}));function be(){return Object(H.jsx)(B.a,{centered:!0,children:Object(H.jsx)(B.a.Column,{computer:"8",tablet:"16",children:Object(H.jsx)(W.a,{children:"Kahjuks me ei leidnud ressurssi, mida otsisite."})})})}var me=n(58),he=Object(P.a)((function(e){var t=e.handleAfterSubmit,n=V().inventoryStore.createItemCondition,a=Object(re.a)({initialValues:{condition:""},onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:i=e.sent,t(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:oe.b({condition:oe.d().required("Seiskord on kohustuslik")})});return Object(H.jsxs)(W.a,{loading:a.isSubmitting,children:[Object(H.jsx)($.a.Input,{autoFocus:!0,name:"condition",label:"Seisukord",onChange:a.handleChange,value:a.values.name,error:Q(a,"name")}),Object(H.jsx)(u.a,{type:"button",onClick:a.handleSubmit,positive:!0,content:"Lisa seisukord"})]})})),Oe=n(373),pe=Object(P.a)((function(e){var t=e.handleAfterSubmit,n=e.handleCloseForm,i=e.itemLocation,r=e.isLevelAdding,c=V().inventoryStore.createItemLocation,o=Object(a.useState)(null),s=Object(J.a)(o,2),l=s[0],b=s[1],m=Object(a.useState)([]),h=Object(J.a)(m,2),O=h[0],p=h[1];Object(a.useEffect)((function(){i&&r?(p([i.name]),b(i.id)):(p([]),b(null))}),[i,r]);var f=Object(re.a)({initialValues:{name:""},onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(Object(N.a)(Object(N.a)({},n),{},{parentLocationId:l}));case 2:a=e.sent,p([].concat(Object(G.a)(O),[a.name])),b(a.id),f.setFieldValue("name",""),f.setTouched(!1),O.length>0&&(a.name="".concat(O.join("/"),"/").concat(a.name)),t(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:oe.b({name:oe.d().required("Nimi on kohustuslik")})});return Object(H.jsxs)(W.a,{loading:f.isSubmitting,children:[Object(H.jsx)(ie.a,{as:"h4",children:l?"T\xe4psusta asukoht":"Lisa uus asukoht"}),Object(H.jsxs)($.a.Field,{inline:!0,error:Q(f,"name"),children:[Object(H.jsxs)("label",{children:[O.join("/"),"/"]}),Object(H.jsx)(Oe.a,{autoFocus:!0,name:"name",onChange:f.handleChange,value:f.values.name})]}),Object(H.jsx)(u.a,{type:"button",onClick:f.handleSubmit,positive:!0,content:"Salvesta"}),Object(H.jsx)(u.a,{type:"button",onClick:n,content:"Valmis"})]})})),fe=Object(P.a)((function(){var e=V().inventoryStore,t=e.selectedItem,n=e.loadSelectedItem,i=e.itemLocations,r=e.loadItemLocations,c=e.itemLocationsLoaded,s=e.createItem,l=e.updateItem,b=e.getItemLocation,m=e.itemConditions,h=e.loadItemConditions,O=e.itemConditionsLoaded,p=Object(o.i)().id,f=Object(o.g)(),x=Object(a.useState)({name:"",serialNumber:"",image:null,removeImage:!1,description:"",itemLocationId:null,itemConditionId:null,weight:""}),v=Object(J.a)(x,2),g=v[0],C=v[1],k=Object(a.useState)(!1),I=Object(J.a)(k,2),w=I[0],L=I[1],S=Object(a.useState)(!1),y=Object(J.a)(S,2),T=y[0],U=y[1],A=Object(a.useState)([]),F=Object(J.a)(A,2),K=F[0],R=F[1],D=Object(a.useState)(!1),P=Object(J.a)(D,2),q=P[0],z=P[1],M=Object(a.useState)([]),_=Object(J.a)(M,2),ee=_[0],ne=_[1],ae=Object(a.useState)(null),ie=Object(J.a)(ae,2),ce=ie[0],se=ie[1],ue=Object(a.useState)(""),le=Object(J.a)(ue,2),de=le[0],je=le[1],be=Object(a.useRef)();Object(a.useEffect)((function(){function e(){R(i.map((function(e){return Y(e,"name")})))}c?e():r().then(e)}),[i,r,c]),Object(a.useEffect)((function(){function e(){ne([{key:0,value:null,text:"---vali---"}].concat(Object(G.a)(m.map((function(e){return Y(e,"condition")})))))}O?e():h().then(e)}),[m,h,O]),Object(a.useEffect)((function(){if(p)if(t&&t.id===Number(p)){var e,a;C({name:t.name,serialNumber:t.serialNumber,image:null,removeImage:!1,description:t.description,itemLocationId:null===(e=t.itemLocation)||void 0===e?void 0:e.id,itemConditionId:null===(a=t.itemCondition)||void 0===a?void 0:a.id,weight:t.weight});var i=t.imageDto;i&&(se(X(i.base64Image,i.mimeType)),je(i.fileName))}else n(p);else C({name:"",serialNumber:"",image:null,removeImage:!1,description:"",itemLocationId:null,itemConditionId:null,weight:""}),se(null),je(null)}),[p,t,n]);var Oe=Object(re.a)({enableReinitialize:!0,initialValues:g,onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.weight,i=Object(N.a)(Object(N.a)({},t),{},{weight:null===a||void 0===a||null===(n=a.toString())||void 0===n?void 0:n.replace(".",",")}),!p){e.next=8;break}return e.next=5,l(p,i);case 5:f.push("/details/".concat(p)),e.next=12;break;case 8:return e.next=10,s(i);case 10:r=e.sent,f.push("/details/".concat(r.id));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:oe.b({name:oe.d().required("Nimi on kohustuslik"),itemLocationId:oe.a().typeError("Asukoht on kohustuslik")})});return Object(H.jsx)(B.a,{centered:!0,children:Object(H.jsx)(B.a.Column,{tablet:"16",computer:"8",children:Object(H.jsx)(W.a,{children:Object(H.jsxs)($.a,{onSubmit:Oe.handleSubmit,loading:Oe.isSubmitting,children:[Object(H.jsx)($.a.Input,{name:"name",label:"Nimetus",onChange:Oe.handleChange,value:Oe.values.name,error:Q(Oe,"name")}),Object(H.jsx)($.a.Input,{name:"serialNumber",label:"Seerianumber",onChange:Oe.handleChange,value:Oe.values.serialNumber,error:Q(Oe,"serialNumber")}),Object(H.jsx)($.a.TextArea,{name:"description",label:"Kirjeldus",onChange:Oe.handleChange,value:Oe.values.description,error:Q(Oe,"description")}),Object(H.jsx)($.a.Input,{name:"weight",label:"Kaal (kg)",onKeyPress:Z,onChange:Oe.handleChange,value:Oe.values.weight,error:Q(Oe,"weight")}),Object(H.jsx)(B.a,{style:{marginBottom:".5em"},children:Object(H.jsxs)(B.a.Row,{children:[Object(H.jsx)(B.a.Column,{width:"10",children:Object(H.jsx)($.a.Select,{name:"itemConditionId",label:"Vali seisukord",placeholder:"Vali seisukord...",options:ee,value:Oe.values.itemConditionId,onChange:function(e,t){var n=t.value;Oe.setFieldValue("itemConditionId",n)}})}),Object(H.jsx)(B.a.Column,{width:"6",children:Object(H.jsx)(u.a,{style:{marginTop:"23px"},color:q?"red":"teal",type:"button",content:q?"T\xfchista":"Lisa uus seisukord",onClick:function(){return z(!q)}})})]})}),q&&Object(H.jsx)(he,{handleAfterSubmit:function(e){ne([].concat(Object(G.a)(ee),[Y(e,"condition")])),Oe.setFieldValue("itemConditionId",e.id),z(!1)}}),Object(H.jsx)($.a.Select,{name:"itemLocationId",label:"Vali asukoht",placeholder:"Vali asukoht...",options:K,value:Oe.values.itemLocationId,onChange:function(e,t){var n=t.value;Oe.setFieldValue("itemLocationId",n)},error:Q(Oe,"itemLocationId")}),!T&&Oe.values.itemLocationId&&Object(H.jsx)(u.a,{color:"teal",type:"button",content:"Lisa uus tase",onClick:function(){U(!0),L(!1)}}),!w&&Object(H.jsx)(u.a,{color:"teal",type:"button",content:"Lisa uus asukoht",onClick:function(){L(!0),U(!1)}}),(w||T)&&Object(H.jsx)(pe,{handleAfterSubmit:function(e){Oe.setFieldValue("itemLocationId",e.id),L(!1),U(!0)},handleCloseForm:function(){L(!1),U(!1)},itemLocation:b(Oe.values.itemLocationId),isLevelAdding:T}),Object(H.jsxs)("div",{style:{marginTop:"3em"},children:[de&&Object(H.jsx)(B.a,{children:Object(H.jsxs)(B.a.Row,{children:[Object(H.jsx)(B.a.Column,{width:"10",children:Object(H.jsx)(te.a,{centered:!0,src:ce,size:"small"})}),Object(H.jsx)(B.a.Column,{width:"6",children:de&&Object(H.jsx)(u.a,{icon:!0,type:"button",onClick:function(){se(null),je(null),Oe.setFieldValue("image",null),Oe.setFieldValue("removeImage",!0),be.current.value=null},color:"red",size:"tiny",children:Object(H.jsx)(me.a,{name:"trash"})})})]})}),Object(H.jsx)(B.a,{children:Object(H.jsx)(B.a.Row,{children:Object(H.jsxs)(B.a.Column,{width:"8",children:[Object(H.jsx)(u.a,{floated:"left",type:"button",content:"Lisa pilt",icon:"file",onClick:function(){return be.current.click()}}),Object(H.jsx)(B.a.Column,{}),Object(H.jsx)(B.a.Column,{width:"8",children:de&&Object(H.jsx)("span",{children:de})})]})})}),Object(H.jsx)("input",{hidden:!0,ref:be,type:"file",onChange:function(e){var t=!!e.target.files&&e.target.files[0];t&&(se(URL.createObjectURL(t)),je(t.name),Oe.setFieldValue("image",t),Oe.setFieldValue("removeImage",!1))}})]}),Object(H.jsxs)("div",{style:{marginTop:"2em"},children:[Object(H.jsx)(u.a,{type:"submit",positive:!0,content:"Salvesta"}),Object(H.jsx)(u.a,{content:"Tagasi",type:"button",as:E.a,to:p?"/details/".concat(p):"/items"})]})]})})})})})),xe=n(376),ve=n(377),ge=Object(P.a)((function(){var e,t=Object(o.i)().id,n=V().inventoryStore,i=n.selectedItem,r=n.loadSelectedItem,c=n.itemLoading;return Object(a.useEffect)((function(){i&&i.id===Number(t)||r(t)}),[t,r,i]),c||!i?Object(H.jsx)(z,{}):Object(H.jsx)(W.a,{children:Object(H.jsx)(xe.a.Group,{children:Object(H.jsxs)(xe.a,{children:[i.imageDto&&Object(H.jsx)(xe.a.Image,{size:"medium",src:X(i.imageDto.base64Image,i.imageDto.mimeType)}),Object(H.jsxs)(xe.a.Content,{children:[Object(H.jsx)(xe.a.Header,{children:i.name}),Object(H.jsxs)(ve.a,{children:[Object(H.jsx)(ve.a.Item,{children:Object(H.jsxs)(ve.a.Content,{children:["Asukoht: ",i.itemLocation.name]})}),Object(H.jsx)(ve.a.Item,{children:Object(H.jsxs)(ve.a.Content,{children:["Seerianumber: ",i.serialNumber]})}),Object(H.jsx)(ve.a.Item,{children:Object(H.jsxs)(ve.a.Content,{children:["Kaal:"," ",i.weight?"".concat(i.weight," kg"):""]})}),Object(H.jsx)(ve.a.Item,{children:Object(H.jsxs)(ve.a.Content,{children:["Seisukord:"," ",null===(e=i.itemCondition)||void 0===e?void 0:e.condition]})})]}),Object(H.jsxs)(xe.a.Description,{children:[Object(H.jsx)(ie.a,{as:"h4",children:"Kirjeldus: "}),i.description]}),Object(H.jsxs)("div",{style:{marginTop:"1em"},children:[Object(H.jsx)(u.a,{content:"Muuda",as:E.a,to:"/edit-item/".concat(i.id)}),Object(H.jsx)(u.a,{content:"Tagasi",as:E.a,to:"/items"})]})]})]})})})})),Ce=n(157),ke=["component"],Ie=Object(P.a)((function(e){var t=e.component,n=Object(Ce.a)(e,ke),a=V().userStore.isRegularUser;return Object(H.jsx)(o.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return a?Object(H.jsx)(t,Object(N.a)({},e)):Object(H.jsx)(o.a,{to:"/"})}}))})),we=["component"],Le=Object(P.a)((function(e){var t=e.component,n=Object(Ce.a)(e,we),a=V().userStore.isAdmin;return Object(H.jsx)(o.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return a?Object(H.jsx)(t,Object(N.a)({},e)):Object(H.jsx)(o.a,{to:"/"})}}))})),Se=n(378),ye=Object(P.a)((function(){var e=V().adminStore,t=e.userTotalItems,n=e.loading,i=e.loadUserTotalItems;return Object(a.useEffect)((function(){i()}),[i]),n?Object(H.jsx)(z,{}):Object(H.jsx)(B.a,{centered:!0,children:Object(H.jsx)(B.a.Column,{computer:"8",tablet:"16",children:Object(H.jsxs)(Se.a,{celled:!0,children:[Object(H.jsx)(Se.a.Header,{children:Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.HeaderCell,{children:"Kasutaja"}),Object(H.jsx)(Se.a.HeaderCell,{children:"Esemete kogus"})]})}),Object(H.jsx)(Se.a.Body,{children:t.map((function(e){return Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.Cell,{children:e.userName}),Object(H.jsx)(Se.a.Cell,{children:e.itemCount})]},e.userName)}))})]})})})})),Te=Object(P.a)((function(){var e=V().adminStore,t=e.userTotalLocations,n=e.loading,i=e.loadUserTotalLocations;return Object(a.useEffect)((function(){i()}),[i]),n?Object(H.jsx)(z,{}):Object(H.jsx)(B.a,{centered:!0,children:Object(H.jsx)(B.a.Column,{computer:"8",tablet:"16",children:Object(H.jsxs)(Se.a,{celled:!0,children:[Object(H.jsx)(Se.a.Header,{children:Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.HeaderCell,{children:"Kasutaja"}),Object(H.jsx)(Se.a.HeaderCell,{children:"Asukohtade arv"})]})}),Object(H.jsx)(Se.a.Body,{children:t.map((function(e){return Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.Cell,{children:e.userName}),Object(H.jsx)(Se.a.Cell,{children:e.locationCount})]},e.userName)}))})]})})})})),Ne=Object(P.a)((function(){var e=V().adminStore,t=e.userItemsTotalWeight,n=e.loading,i=e.loadUserItemsTotalWeight;return Object(a.useEffect)((function(){i()}),[i]),n?Object(H.jsx)(z,{}):Object(H.jsx)(B.a,{centered:!0,children:Object(H.jsx)(B.a.Column,{computer:"8",tablet:"16",children:Object(H.jsxs)(Se.a,{celled:!0,children:[Object(H.jsx)(Se.a.Header,{children:Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.HeaderCell,{children:"Kasutaja"}),Object(H.jsx)(Se.a.HeaderCell,{children:"Asjade kogukaal"})]})}),Object(H.jsx)(Se.a.Body,{children:t.map((function(e){return Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.Cell,{children:e.userName}),Object(H.jsxs)(Se.a.Cell,{children:[e.weight," kg"]})]},e.userName)}))})]})})})})),Ue=Object(P.a)((function(){var e=V().adminStore,t=e.userTotalItemsWithImagesCount,n=e.loading,i=e.loadUserTotalItemsWithImagesCount;return Object(a.useEffect)((function(){i()}),[i]),n?Object(H.jsx)(z,{}):Object(H.jsx)(B.a,{centered:!0,children:Object(H.jsx)(B.a.Column,{computer:"8",tablet:"16",children:Object(H.jsxs)(Se.a,{celled:!0,children:[Object(H.jsx)(Se.a.Header,{children:Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.HeaderCell,{children:"Kasutaja"}),Object(H.jsx)(Se.a.HeaderCell,{children:"Esemete arv millel on pilt"})]})}),Object(H.jsx)(Se.a.Body,{children:t.map((function(e){return Object(H.jsxs)(Se.a.Row,{children:[Object(H.jsx)(Se.a.Cell,{children:e.userName}),Object(H.jsx)(Se.a.Cell,{children:e.imageCount})]},e.userName)}))})]})})})})),Ae="userTotalItems",Fe="userTotalLocations",Ke="userItemsTotalWeight",Re="userTotalItemsWithImagesCount",Ve=Object(P.a)((function(){var e=Object(a.useState)(Ae),t=Object(J.a)(e,2),n=t[0],i=t[1];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(s.a,{pointing:!0,secondary:!0,children:[Object(H.jsx)(s.a.Item,{name:"Kasutaja esemete kogus",active:n===Ae,onClick:function(){return i(Ae)}}),Object(H.jsx)(s.a.Item,{name:"Kasutaja lisatud asukohtade arv",active:n===Fe,onClick:function(){return i(Fe)}}),Object(H.jsx)(s.a.Item,{name:"Kasutaja esemete kogu kaal",active:n===Ke,onClick:function(){return i(Ke)}}),Object(H.jsx)(s.a.Item,{name:"Kasutaja Esemete arv millel on pilt",active:n===Re,onClick:function(){return i(Re)}})]}),n===Ae&&Object(H.jsx)(ye,{}),n===Fe&&Object(H.jsx)(Te,{}),n===Ke&&Object(H.jsx)(Ne,{}),n===Re&&Object(H.jsx)(Ue,{})]})}));function Ee(){var e=Object(o.h)().state;return Object(H.jsxs)(W.a,{children:[Object(H.jsxs)(ie.a,{as:"h3",children:[e.statusCode," - ",e.message]}),Object(H.jsx)("code",{children:e.details})]})}var He=Object(P.a)((function(){var e=V(),t=e.appStore,n=e.userStore,i=n.token,r=n.getUser,s=n.isLoggedIn;return Object(a.useEffect)((function(){i?r().finally((function(){return t.setAppLoaded()})):t.setAppLoaded()}),[i,r,t]),t.appLoaded?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(o.b,{exact:!0,path:"/",component:je}),Object(H.jsx)(o.b,{path:"/(.+)",render:function(){return Object(H.jsxs)(H.Fragment,{children:[s&&Object(H.jsx)(D,{}),Object(H.jsx)(c.a,{style:{marginTop:"7em"},children:Object(H.jsxs)(o.d,{children:[Object(H.jsx)(Ie,{path:"/items",component:ae}),Object(H.jsx)(Ie,{path:"/details/:id",component:ge}),Object(H.jsx)(Ie,{path:["/add-item","/edit-item/:id"],component:fe}),Object(H.jsx)(Le,{path:"/admin",component:Ve}),Object(H.jsx)(o.b,{path:"/server-error",component:Ee}),Object(H.jsx)(o.b,{component:be})]})})]})}})]}):Object(H.jsx)(z,{})})),De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,385)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))},Pe=n(33),We=(n(356),n(357),Object(Pe.a)());r.a.render(Object(H.jsx)(R.Provider,{value:K,children:Object(H.jsx)(o.c,{history:We,children:Object(H.jsx)(He,{})})}),document.getElementById("root")),De()}},[[358,1,2]]]);
//# sourceMappingURL=main.73453c71.chunk.js.map